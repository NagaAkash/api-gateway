2025-04-25T15:04:05.250+05:30  INFO 10548 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 10548 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:04:05.251+05:30 DEBUG 10548 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:04:05.252+05:30  INFO 10548 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:04:06.540+05:30  INFO 10548 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:04:06.696+05:30  INFO 10548 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 133 ms. Found 1 JPA repository interface.
2025-04-25T15:04:07.004+05:30  INFO 10548 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=17dcd7af-2cb1-3c7d-aafc-9ad4aefb5943
2025-04-25T15:04:07.802+05:30  INFO 10548 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:04:07.857+05:30  INFO 10548 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:04:07.920+05:30  INFO 10548 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:04:08.351+05:30  INFO 10548 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:04:08.384+05:30  INFO 10548 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:04:08.561+05:30  INFO 10548 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@38022758
2025-04-25T15:04:08.563+05:30  INFO 10548 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:04:08.615+05:30  WARN 10548 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:04:08.616+05:30  WARN 10548 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-04-25T15:04:08.776+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@10d98940) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@58b8f9e3)
2025-04-25T15:04:08.777+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@32a033b6) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5f6e2ad9)
2025-04-25T15:04:08.777+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@3212bfd) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1cc9bd9b)
2025-04-25T15:04:08.777+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2f471037) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1d1cfe4)
2025-04-25T15:04:08.777+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@ba562e0) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5a51336a)
2025-04-25T15:04:08.777+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@4d8056bf) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@42211e04)
2025-04-25T15:04:08.777+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6233c6c2) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@312a738d)
2025-04-25T15:04:08.777+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7e50eeb9) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@34cb0e49)
2025-04-25T15:04:08.778+05:30 DEBUG 10548 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@48b2dbc4) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2a667f44)
2025-04-25T15:04:09.496+05:30  INFO 10548 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:04:09.550+05:30  INFO 10548 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:04:10.633+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:04:10.768+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:04:10.769+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:04:10.770+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:04:10.770+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:04:10.770+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:04:10.770+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:04:10.770+05:30  INFO 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:04:11.251+05:30  INFO 10548 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:04:11.318+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:04:11.347+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:04:11.347+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:04:11.349+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to JwtFilter
2025-04-25T15:04:11.352+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:04:11.352+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:04:11.354+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying filter {} to JwtFilter
2025-04-25T15:04:11.354+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:04:11.354+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:04:11.355+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying filter {} to JwtFilter
2025-04-25T15:04:11.356+05:30 DEBUG 10548 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:04:11.391+05:30  INFO 10548 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 6.757 seconds (process running for 7.334)
2025-04-25T15:04:29.934+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:04:29.936+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:04:29.936+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:04:29.939+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:04:29.940+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:04:29.940+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:04:29.940+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:04:29.940+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:04:29.941+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x000002a0958dd780@66a36299
2025-04-25T15:04:29.941+05:30 DEBUG 10548 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:04:30.256+05:30 DEBUG 10548 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:04:40.654+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:04:40.655+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:04:40.655+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:04:40.655+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:04:40.655+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:04:40.656+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:04:40.656+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:04:40.656+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:04:40.656+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=DELETE}
2025-04-25T15:04:40.656+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /patients/**'
2025-04-25T15:04:40.657+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/appointments/**', method=DELETE}
2025-04-25T15:04:40.657+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /appointments/**'
2025-04-25T15:04:40.657+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:04:40.657+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:04:40.657+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:04:40.657+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:04:40.657+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@65636785
2025-04-25T15:04:40.660+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@5d46123e'
2025-04-25T15:04:40.660+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied
2025-04-25T15:04:40.667+05:30 DEBUG 10548 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@5d46123e'
2025-04-25T15:05:12.833+05:30  INFO 10548 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:05:12.843+05:30  INFO 10548 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:05:12.871+05:30  INFO 10548 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:05:17.285+05:30  INFO 13056 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 13056 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:05:17.288+05:30 DEBUG 13056 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:05:17.289+05:30  INFO 13056 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:05:18.387+05:30  INFO 13056 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:05:18.547+05:30  INFO 13056 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 142 ms. Found 1 JPA repository interface.
2025-04-25T15:05:18.856+05:30  INFO 13056 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=17dcd7af-2cb1-3c7d-aafc-9ad4aefb5943
2025-04-25T15:05:19.607+05:30  INFO 13056 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:05:19.686+05:30  INFO 13056 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:05:19.720+05:30  INFO 13056 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:05:20.180+05:30  INFO 13056 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:05:20.226+05:30  INFO 13056 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:05:20.467+05:30  INFO 13056 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f5f5bc9
2025-04-25T15:05:20.469+05:30  INFO 13056 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:05:20.549+05:30  WARN 13056 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:05:20.551+05:30  WARN 13056 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-04-25T15:05:20.597+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2f0cab82) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7fcc3745)
2025-04-25T15:05:20.598+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6d35ff7b) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4ef31221)
2025-04-25T15:05:20.599+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4e9e0c6) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1a819901)
2025-04-25T15:05:20.599+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@588d630d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@eb91027)
2025-04-25T15:05:20.599+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@459d2ee6) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5342eec5)
2025-04-25T15:05:20.599+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@60e47aab) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@261a66b8)
2025-04-25T15:05:20.599+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@adc8683) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@4eac65db)
2025-04-25T15:05:20.599+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@dde6f87) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7884f722)
2025-04-25T15:05:20.600+05:30 DEBUG 13056 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@16029e2f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3b2db389)
2025-04-25T15:05:21.514+05:30  INFO 13056 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:05:21.563+05:30  INFO 13056 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:05:23.750+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:05:23.922+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:05:23.922+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:05:23.922+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:05:23.923+05:30  INFO 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:05:24.936+05:30  INFO 13056 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:05:25.023+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:05:25.064+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:05:25.064+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:05:25.066+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to JwtFilter
2025-04-25T15:05:25.074+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:05:25.074+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:05:25.075+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying filter {} to JwtFilter
2025-04-25T15:05:25.076+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:05:25.076+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:05:25.076+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying filter {} to JwtFilter
2025-04-25T15:05:25.076+05:30 DEBUG 13056 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:05:25.141+05:30  INFO 13056 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 8.69 seconds (process running for 10.016)
2025-04-25T15:05:29.398+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:05:29.406+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:05:29.407+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:05:29.420+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:05:29.421+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:05:29.421+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=DELETE}
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /patients/**'
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/appointments/**', method=DELETE}
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /appointments/**'
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:05:29.422+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:05:29.424+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:05:29.424+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:05:29.425+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@117bf53
2025-04-25T15:05:29.436+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@6f932bfb'
2025-04-25T15:05:29.437+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied
2025-04-25T15:05:29.465+05:30 DEBUG 13056 --- [api-gateway] [parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@6f932bfb'
2025-04-25T15:09:35.159+05:30  INFO 13056 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:09:35.162+05:30  INFO 13056 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:09:35.171+05:30  INFO 13056 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:10:15.193+05:30  INFO 15048 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 15048 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:10:15.196+05:30 DEBUG 15048 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:10:15.197+05:30  INFO 15048 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:10:16.343+05:30  INFO 15048 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:10:16.490+05:30  INFO 15048 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 139 ms. Found 1 JPA repository interface.
2025-04-25T15:10:16.828+05:30  INFO 15048 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=692bfa83-67ad-392e-b066-607f233c1559
2025-04-25T15:10:17.556+05:30  INFO 15048 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:10:17.724+05:30  INFO 15048 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:10:17.757+05:30  INFO 15048 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:10:18.167+05:30  INFO 15048 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:10:18.199+05:30  INFO 15048 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:10:18.399+05:30  INFO 15048 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@402d6012
2025-04-25T15:10:18.401+05:30  INFO 15048 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:10:18.438+05:30  WARN 15048 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:10:18.439+05:30  WARN 15048 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-04-25T15:10:18.464+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@48e74764) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@338d47b)
2025-04-25T15:10:18.464+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7a3643e3) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2729bb71)
2025-04-25T15:10:18.464+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@55071497) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@10d98940)
2025-04-25T15:10:18.466+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@58b8f9e3) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@32a033b6)
2025-04-25T15:10:18.466+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5f6e2ad9) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3212bfd)
2025-04-25T15:10:18.466+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1cc9bd9b) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2f471037)
2025-04-25T15:10:18.466+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1d1cfe4) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@ba562e0)
2025-04-25T15:10:18.466+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5a51336a) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@4d8056bf)
2025-04-25T15:10:18.466+05:30 DEBUG 15048 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@42211e04) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@6233c6c2)
2025-04-25T15:10:19.255+05:30  INFO 15048 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:10:19.306+05:30  INFO 15048 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:10:20.391+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}, FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:10:20.493+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:10:20.494+05:30  INFO 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:10:20.988+05:30  INFO 15048 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:10:21.033+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:10:21.059+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:10:21.059+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:10:21.061+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to LoggingFilter
2025-04-25T15:10:21.064+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to JwtFilter
2025-04-25T15:10:21.065+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:10:21.065+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:10:21.066+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying filter {} to JwtFilter
2025-04-25T15:10:21.067+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:10:21.067+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:10:21.068+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying filter {} to JwtFilter
2025-04-25T15:10:21.068+05:30 DEBUG 15048 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:10:21.084+05:30  INFO 15048 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 6.573 seconds (process running for 7.248)
2025-04-25T15:10:31.576+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:10:31.579+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:10:31.579+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:10:31.583+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:10:31.584+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:10:31.585+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:10:31.585+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:10:31.585+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:10:31.585+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x000002cf858dd780@49d14fb3
2025-04-25T15:10:31.586+05:30 DEBUG 15048 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:10:31.869+05:30 DEBUG 15048 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=DELETE}
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /patients/**'
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/appointments/**', method=DELETE}
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /appointments/**'
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@bacf9c5
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@6f74699e'
2025-04-25T15:10:42.713+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied
2025-04-25T15:10:42.724+05:30 DEBUG 15048 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@6f74699e'
2025-04-25T15:14:08.894+05:30  INFO 15048 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:14:08.897+05:30  INFO 15048 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:14:08.906+05:30  INFO 15048 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:14:13.555+05:30  INFO 10684 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 10684 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:14:13.556+05:30 DEBUG 10684 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:14:13.557+05:30  INFO 10684 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:14:14.932+05:30  INFO 10684 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:14:15.117+05:30  INFO 10684 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 168 ms. Found 1 JPA repository interface.
2025-04-25T15:14:15.393+05:30  INFO 10684 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=692bfa83-67ad-392e-b066-607f233c1559
2025-04-25T15:14:16.004+05:30  INFO 10684 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:14:16.070+05:30  INFO 10684 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:14:16.121+05:30  INFO 10684 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:14:16.478+05:30  INFO 10684 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:14:16.504+05:30  INFO 10684 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:14:16.683+05:30  INFO 10684 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2086d469
2025-04-25T15:14:16.684+05:30  INFO 10684 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:14:16.721+05:30  WARN 10684 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:14:16.723+05:30  WARN 10684 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-04-25T15:14:16.754+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1a7e799e) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@37a3ec27)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@283baa39) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@416b1265)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2830315f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@da22aa)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@75452aea) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@6c24f61d)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@4537880f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@14292d71)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@48e74764) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@338d47b)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7a3643e3) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2729bb71)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@55071497) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@10d98940)
2025-04-25T15:14:16.755+05:30 DEBUG 10684 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@58b8f9e3) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@32a033b6)
2025-04-25T15:14:17.509+05:30  INFO 10684 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:14:17.567+05:30  INFO 10684 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:14:17.991+05:30  INFO 10684 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtFilter   : JwtFilter bean initialized
2025-04-25T15:14:18.632+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}, FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:14:18.784+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:14:18.785+05:30  INFO 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:14:19.389+05:30  INFO 10684 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:14:19.429+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:14:19.455+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:14:19.456+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:14:19.458+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to LoggingFilter
2025-04-25T15:14:19.461+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to JwtFilter
2025-04-25T15:14:19.462+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:14:19.462+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:14:19.463+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying filter {} to JwtFilter
2025-04-25T15:14:19.463+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:14:19.464+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:14:19.464+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying filter {} to JwtFilter
2025-04-25T15:14:19.465+05:30 DEBUG 10684 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:14:19.485+05:30  INFO 10684 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 6.593 seconds (process running for 7.175)
2025-04-25T15:14:29.955+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:14:29.958+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:14:29.958+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:14:29.962+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:14:29.964+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:14:29.964+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:14:29.964+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:14:29.965+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:14:29.965+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=DELETE}
2025-04-25T15:14:29.965+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /patients/**'
2025-04-25T15:14:29.965+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/appointments/**', method=DELETE}
2025-04-25T15:14:29.965+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /appointments/**'
2025-04-25T15:14:29.965+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:14:29.965+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:14:29.967+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:14:29.967+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:14:29.968+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@5e719f8e
2025-04-25T15:14:29.973+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@731b08c6'
2025-04-25T15:14:29.974+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied
2025-04-25T15:14:29.983+05:30 DEBUG 10684 --- [api-gateway] [parallel-1] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@731b08c6'
2025-04-25T15:16:29.793+05:30  INFO 10684 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:16:29.796+05:30  INFO 10684 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:16:29.808+05:30  INFO 10684 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:16:32.844+05:30  INFO 7264 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 7264 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:16:32.846+05:30 DEBUG 7264 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:16:32.847+05:30  INFO 7264 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:16:33.916+05:30  INFO 7264 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:16:34.080+05:30  INFO 7264 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 151 ms. Found 1 JPA repository interface.
2025-04-25T15:16:34.337+05:30  INFO 7264 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=692bfa83-67ad-392e-b066-607f233c1559
2025-04-25T15:16:34.948+05:30  INFO 7264 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:16:35.013+05:30  INFO 7264 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:16:35.046+05:30  INFO 7264 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:16:35.378+05:30  INFO 7264 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:16:35.416+05:30  INFO 7264 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:16:35.570+05:30  INFO 7264 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@247bbfba
2025-04-25T15:16:35.572+05:30  INFO 7264 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:16:35.615+05:30  WARN 7264 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:16:35.616+05:30  WARN 7264 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-04-25T15:16:35.643+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6c24f61d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4537880f)
2025-04-25T15:16:35.643+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@14292d71) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@48e74764)
2025-04-25T15:16:35.643+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@338d47b) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7a3643e3)
2025-04-25T15:16:35.643+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2729bb71) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@55071497)
2025-04-25T15:16:35.645+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@10d98940) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@58b8f9e3)
2025-04-25T15:16:35.645+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@32a033b6) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5f6e2ad9)
2025-04-25T15:16:35.645+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@3212bfd) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1cc9bd9b)
2025-04-25T15:16:35.645+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2f471037) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1d1cfe4)
2025-04-25T15:16:35.652+05:30 DEBUG 7264 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@ba562e0) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5a51336a)
2025-04-25T15:16:36.434+05:30  INFO 7264 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:16:36.475+05:30  INFO 7264 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:16:36.897+05:30  INFO 7264 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtFilter   : JwtFilter bean initialized
2025-04-25T15:16:37.436+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}, FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[FilterDefinition{name='JwtFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:16:37.551+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:16:37.552+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:16:37.552+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:16:37.552+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:16:37.552+05:30  INFO 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:16:38.090+05:30  INFO 7264 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:16:38.134+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:16:38.155+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:16:38.155+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:16:38.156+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to LoggingFilter
2025-04-25T15:16:38.159+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to JwtFilter
2025-04-25T15:16:38.160+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:16:38.160+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:16:38.161+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying filter {} to JwtFilter
2025-04-25T15:16:38.161+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:16:38.162+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:16:38.162+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying filter {} to JwtFilter
2025-04-25T15:16:38.163+05:30 DEBUG 7264 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:16:38.177+05:30  INFO 7264 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 6.04 seconds (process running for 6.694)
2025-04-25T15:16:46.096+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:16:46.098+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:16:46.098+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:16:46.103+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:16:46.104+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:16:46.104+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:16:46.104+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:16:46.104+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:16:46.106+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x0000020e818dd2d8@46c2c94d
2025-04-25T15:16:46.106+05:30 DEBUG 7264 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:16:46.432+05:30 DEBUG 7264 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=DELETE}
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /patients/**'
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/appointments/**', method=DELETE}
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /appointments/**'
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:16:56.267+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@2d48db8d
2025-04-25T15:16:56.275+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@483a40e1'
2025-04-25T15:16:56.275+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied
2025-04-25T15:16:56.282+05:30 DEBUG 7264 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@483a40e1'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=DELETE}
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /patients/**'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/appointments/**', method=DELETE}
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'DELETE /appointments/**'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthorityReactiveAuthorizationManager@2d48db8d
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@7e315adb'
2025-04-25T15:17:13.897+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied
2025-04-25T15:17:13.906+05:30 DEBUG 7264 --- [api-gateway] [parallel-3] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@7e315adb'
2025-04-25T15:17:46.595+05:30  INFO 7264 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:17:46.601+05:30  INFO 7264 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:17:46.621+05:30  INFO 7264 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:19:27.833+05:30  INFO 860 --- [api-gateway] [main] c.h.a.ApiGatewayApplicationTests         : Starting ApiGatewayApplicationTests using Java 23.0.2 with PID 860 (started by nagaa in D:\Projects\microservices\api-gateway)
2025-04-25T15:19:27.835+05:30 DEBUG 860 --- [api-gateway] [main] c.h.a.ApiGatewayApplicationTests         : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:19:27.835+05:30  INFO 860 --- [api-gateway] [main] c.h.a.ApiGatewayApplicationTests         : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:19:29.124+05:30  INFO 860 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:19:29.254+05:30  INFO 860 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 117 ms. Found 1 JPA repository interface.
2025-04-25T15:19:29.569+05:30  INFO 860 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=09411e56-449d-3640-b300-6294eb97c73a
2025-04-25T15:19:30.065+05:30  INFO 860 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:19:30.147+05:30  INFO 860 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:19:30.208+05:30  INFO 860 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:19:30.618+05:30  INFO 860 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:19:30.680+05:30  INFO 860 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:19:30.858+05:30  INFO 860 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3caf5c96
2025-04-25T15:19:30.860+05:30  INFO 860 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:19:30.912+05:30  WARN 860 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:19:30.949+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@71262020) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5f3ddc86)
2025-04-25T15:19:30.949+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@78e043e4) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@336d28a1)
2025-04-25T15:19:30.950+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@738a39cc) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@42e202d7)
2025-04-25T15:19:30.950+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@38e7860c) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@62158991)
2025-04-25T15:19:30.950+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@40738846) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1255de25)
2025-04-25T15:19:30.950+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1686ed85) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5891b7c5)
2025-04-25T15:19:30.950+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4fc3529) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@38e46765)
2025-04-25T15:19:30.950+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@192f5f39) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@4cd5fc46)
2025-04-25T15:19:30.951+05:30 DEBUG 860 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2965dd88) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3221588e)
2025-04-25T15:19:31.822+05:30  INFO 860 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:19:31.880+05:30  INFO 860 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:19:33.128+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:19:33.247+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:19:33.248+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:19:33.249+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:19:33.249+05:30  INFO 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:19:33.643+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:19:33.684+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:19:33.685+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:19:33.686+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to LoggingFilter
2025-04-25T15:19:33.690+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:19:33.691+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:19:33.692+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying filter {} to LoggingFilter
2025-04-25T15:19:33.694+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:19:33.694+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:19:33.695+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying filter {} to LoggingFilter
2025-04-25T15:19:33.696+05:30 DEBUG 860 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:19:33.706+05:30  INFO 860 --- [api-gateway] [main] c.h.a.ApiGatewayApplicationTests         : Started ApiGatewayApplicationTests in 6.534 seconds (process running for 8.048)
2025-04-25T15:19:34.315+05:30  INFO 860 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:19:34.319+05:30  INFO 860 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:19:34.329+05:30  INFO 860 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:20:18.019+05:30  INFO 6272 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 6272 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:20:18.022+05:30 DEBUG 6272 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:20:18.023+05:30  INFO 6272 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:20:19.191+05:30  INFO 6272 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:20:19.317+05:30  INFO 6272 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 1 JPA repository interface.
2025-04-25T15:20:19.668+05:30  INFO 6272 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=05ff8628-23e2-3eab-b091-5633911f1d60
2025-04-25T15:20:20.505+05:30  INFO 6272 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:20:20.657+05:30  INFO 6272 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:20:20.703+05:30  INFO 6272 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:20:21.028+05:30  INFO 6272 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:20:21.067+05:30  INFO 6272 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:20:21.261+05:30  INFO 6272 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14485747
2025-04-25T15:20:21.262+05:30  INFO 6272 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:20:21.301+05:30  WARN 6272 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:20:21.325+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@14656be5) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@20be890d)
2025-04-25T15:20:21.325+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5db9f51f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@534762ed)
2025-04-25T15:20:21.325+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6c421123) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@38e00b47)
2025-04-25T15:20:21.325+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2a631049) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@425b5fe2)
2025-04-25T15:20:21.326+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3eec8583) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@66e1b2a)
2025-04-25T15:20:21.326+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@343db2f6) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2c815fdc)
2025-04-25T15:20:21.326+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@769b0752) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@dae5e0)
2025-04-25T15:20:21.326+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@59a94d0f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7ff09659)
2025-04-25T15:20:21.326+05:30 DEBUG 6272 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@517fbf62) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@65db548)
2025-04-25T15:20:22.077+05:30  INFO 6272 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:20:22.126+05:30  INFO 6272 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:20:23.134+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[FilterDefinition{name='LoggingFilter', args={}}], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:20:23.260+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:20:23.261+05:30  INFO 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:20:23.829+05:30  INFO 6272 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:20:23.869+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:20:23.896+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:20:23.896+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:20:23.898+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying filter {} to LoggingFilter
2025-04-25T15:20:23.901+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:20:23.901+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:20:23.903+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying filter {} to LoggingFilter
2025-04-25T15:20:23.903+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:20:23.903+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:20:23.904+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying filter {} to LoggingFilter
2025-04-25T15:20:23.905+05:30 DEBUG 6272 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:20:23.924+05:30  INFO 6272 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 6.654 seconds (process running for 7.251)
2025-04-25T15:23:23.993+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:23:23.993+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:23:23.993+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:23:24.001+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:23:24.001+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:23:24.001+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:23:24.001+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:23:24.001+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:23:24.001+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x0000024f818de218@12adf561
2025-04-25T15:23:24.001+05:30 DEBUG 6272 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:23:24.286+05:30 DEBUG 6272 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:23:34.325+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:23:34.326+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:23:34.326+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:23:34.326+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:23:34.326+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:23:34.327+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:23:34.327+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:23:34.327+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:23:34.328+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthenticatedReactiveAuthorizationManager@36b10338
2025-04-25T15:23:34.329+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@7cfa2d55'
2025-04-25T15:23:34.329+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization failed: Access Denied
2025-04-25T15:23:34.336+05:30 ERROR 6272 --- [api-gateway] [parallel-2] c.h.api_gateway.config.SecurityConfig    : Authentication failed for path /patients: Not Authenticated
2025-04-25T15:23:34.337+05:30 DEBUG 6272 --- [api-gateway] [parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@7cfa2d55'
2025-04-25T15:29:11.510+05:30  INFO 6272 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:29:11.512+05:30  INFO 6272 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:29:11.523+05:30  INFO 6272 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:29:16.128+05:30  INFO 12064 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 12064 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:29:16.130+05:30 DEBUG 12064 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:29:16.131+05:30  INFO 12064 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:29:17.564+05:30  INFO 12064 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:29:17.759+05:30  INFO 12064 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 175 ms. Found 1 JPA repository interface.
2025-04-25T15:29:18.070+05:30  INFO 12064 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:29:18.335+05:30  INFO 10332 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 10332 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:29:18.337+05:30 DEBUG 10332 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:29:18.339+05:30  INFO 10332 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:29:18.814+05:30  INFO 12064 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:29:18.878+05:30  INFO 12064 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:29:18.929+05:30  INFO 12064 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:29:19.266+05:30  INFO 12064 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:29:19.301+05:30  INFO 12064 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:29:19.552+05:30  INFO 12064 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4be12f6c
2025-04-25T15:29:19.554+05:30  INFO 12064 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:29:19.609+05:30  WARN 12064 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:29:19.653+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@3f1158ee) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6463da36)
2025-04-25T15:29:19.654+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4a4b288a) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1c6ac73c)
2025-04-25T15:29:19.654+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@29892a77) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5341e71a)
2025-04-25T15:29:19.654+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@405d8a80) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@ac4e690)
2025-04-25T15:29:19.655+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@6afeaf2d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@365bfc5f)
2025-04-25T15:29:19.655+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1a7e799e) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@37a3ec27)
2025-04-25T15:29:19.655+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@283baa39) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@416b1265)
2025-04-25T15:29:19.655+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2830315f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@da22aa)
2025-04-25T15:29:19.655+05:30 DEBUG 12064 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@75452aea) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@6c24f61d)
2025-04-25T15:29:19.694+05:30  INFO 10332 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:29:19.816+05:30  INFO 10332 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 113 ms. Found 1 JPA repository interface.
2025-04-25T15:29:20.105+05:30  INFO 10332 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:29:20.487+05:30  INFO 12064 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:29:20.542+05:30  INFO 12064 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:29:20.774+05:30  INFO 10332 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:29:20.857+05:30  INFO 10332 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:29:20.913+05:30  INFO 10332 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:29:21.054+05:30  INFO 12064 --- [api-gateway] [main] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter bean initialized
2025-04-25T15:29:21.262+05:30  INFO 10332 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:29:21.299+05:30  INFO 10332 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:29:21.563+05:30  INFO 10332 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63553e9f
2025-04-25T15:29:21.566+05:30  INFO 10332 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:29:21.652+05:30  WARN 10332 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:29:21.704+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1c6ac73c) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@29892a77)
2025-04-25T15:29:21.705+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5341e71a) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@405d8a80)
2025-04-25T15:29:21.705+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@ac4e690) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6afeaf2d)
2025-04-25T15:29:21.706+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@365bfc5f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1a7e799e)
2025-04-25T15:29:21.706+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@37a3ec27) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@283baa39)
2025-04-25T15:29:21.706+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@416b1265) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2830315f)
2025-04-25T15:29:21.706+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@da22aa) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@75452aea)
2025-04-25T15:29:21.707+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6c24f61d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@4537880f)
2025-04-25T15:29:21.707+05:30 DEBUG 10332 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@14292d71) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@48e74764)
2025-04-25T15:29:21.801+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:29:21.962+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:29:21.962+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:29:21.962+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:29:21.963+05:30  INFO 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:29:22.417+05:30  INFO 12064 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:29:22.458+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:29:22.484+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:29:22.485+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:29:22.486+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:29:22.486+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:29:22.488+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:29:22.488+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:29:22.489+05:30 DEBUG 12064 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:29:22.506+05:30  INFO 12064 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 7.094 seconds (process running for 7.692)
2025-04-25T15:29:22.595+05:30  INFO 10332 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:29:22.633+05:30  INFO 10332 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:29:23.178+05:30  INFO 10332 --- [api-gateway] [main] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter bean initialized
2025-04-25T15:29:23.800+05:30 DEBUG 10332 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:29:23.918+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:29:23.919+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:29:23.919+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:29:23.919+05:30  INFO 10332 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:29:26.597+05:30  WARN 10332 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-04-25T15:29:26.599+05:30  INFO 10332 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:29:26.601+05:30  INFO 10332 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:29:26.612+05:30  INFO 10332 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:29:26.623+05:30  INFO 10332 --- [api-gateway] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-25T15:29:26.650+05:30 ERROR 10332 --- [api-gateway] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-04-25T15:29:34.431+05:30  INFO 12064 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:29:34.434+05:30  INFO 12064 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:29:34.452+05:30  INFO 12064 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:29:38.180+05:30  INFO 7984 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 7984 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:29:38.181+05:30 DEBUG 7984 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:29:38.182+05:30  INFO 7984 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:29:39.348+05:30  INFO 7984 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:29:39.514+05:30  INFO 7984 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 1 JPA repository interface.
2025-04-25T15:29:39.766+05:30  INFO 7984 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:29:40.343+05:30  INFO 7984 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:29:40.412+05:30  INFO 7984 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:29:40.458+05:30  INFO 7984 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:29:40.799+05:30  INFO 7984 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:29:40.831+05:30  INFO 7984 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:29:41.023+05:30  INFO 7984 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b126187
2025-04-25T15:29:41.025+05:30  INFO 7984 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:29:41.070+05:30  WARN 7984 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:29:41.096+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@416b1265) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2830315f)
2025-04-25T15:29:41.096+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@da22aa) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@75452aea)
2025-04-25T15:29:41.096+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6c24f61d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4537880f)
2025-04-25T15:29:41.096+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@14292d71) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@48e74764)
2025-04-25T15:29:41.097+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@338d47b) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7a3643e3)
2025-04-25T15:29:41.097+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2729bb71) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@55071497)
2025-04-25T15:29:41.097+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@10d98940) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@58b8f9e3)
2025-04-25T15:29:41.097+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@32a033b6) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5f6e2ad9)
2025-04-25T15:29:41.097+05:30 DEBUG 7984 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@3212bfd) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@1cc9bd9b)
2025-04-25T15:29:41.913+05:30  INFO 7984 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:29:41.964+05:30  INFO 7984 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:29:42.330+05:30  INFO 7984 --- [api-gateway] [main] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter bean initialized
2025-04-25T15:29:43.043+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:29:43.157+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:29:43.157+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:29:43.157+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:29:43.157+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:29:43.158+05:30  INFO 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:29:43.672+05:30  INFO 7984 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:29:43.726+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:29:43.758+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:29:43.759+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:29:43.761+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:29:43.761+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:29:43.763+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:29:43.763+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:29:43.764+05:30 DEBUG 7984 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:29:43.779+05:30  INFO 7984 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 6.237 seconds (process running for 6.825)
2025-04-25T15:29:49.879+05:30  INFO 7984 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:29:49.880+05:30 DEBUG 7984 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:29:49.904+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:29:49.905+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:29:49.905+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:29:49.909+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:29:49.910+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:29:49.910+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:29:49.910+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:29:49.910+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:29:49.910+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000262198dec00@7caeda18
2025-04-25T15:29:49.912+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:29:49.912+05:30  INFO 7984 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:29:49.912+05:30 DEBUG 7984 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:29:50.230+05:30 DEBUG 7984 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:30:08.696+05:30  INFO 7984 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:30:08.696+05:30 DEBUG 7984 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzUxOTAsImV4cCI6MTc0NTU3ODc5MH0.OQRbzTIje0zs7hbZum6Wtd0-eDSI71dMgMdEATk_Up0"
2025-04-25T15:30:08.713+05:30 ERROR 7984 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Token processing error for path /patients: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:37:39.293+05:30  INFO 7984 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:37:39.293+05:30  INFO 7984 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:37:39.311+05:30  INFO 7984 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:37:44.530+05:30  INFO 12544 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 12544 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:37:44.536+05:30 DEBUG 12544 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:37:44.537+05:30  INFO 12544 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:37:45.771+05:30  INFO 12544 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:37:45.936+05:30  INFO 12544 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 157 ms. Found 1 JPA repository interface.
2025-04-25T15:37:46.253+05:30  INFO 12544 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:37:47.116+05:30  INFO 12544 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:37:47.184+05:30  INFO 12544 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:37:47.214+05:30  INFO 12544 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:37:47.567+05:30  INFO 12544 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:37:47.590+05:30  INFO 12544 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:37:47.831+05:30  INFO 12544 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e81617a
2025-04-25T15:37:47.833+05:30  INFO 12544 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:37:47.941+05:30  WARN 12544 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:37:47.999+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@75452aea) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6c24f61d)
2025-04-25T15:37:48.000+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4537880f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@14292d71)
2025-04-25T15:37:48.000+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@48e74764) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@338d47b)
2025-04-25T15:37:48.000+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7a3643e3) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2729bb71)
2025-04-25T15:37:48.001+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@55071497) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@10d98940)
2025-04-25T15:37:48.001+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@58b8f9e3) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@32a033b6)
2025-04-25T15:37:48.001+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5f6e2ad9) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3212bfd)
2025-04-25T15:37:48.001+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1cc9bd9b) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2f471037)
2025-04-25T15:37:48.002+05:30 DEBUG 12544 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@1d1cfe4) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@ba562e0)
2025-04-25T15:37:49.119+05:30  INFO 12544 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:37:49.167+05:30  INFO 12544 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:37:49.709+05:30  INFO 12544 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtUtil     : JwtUtil initialized with secret (first 5 chars): sdfgh
2025-04-25T15:37:49.710+05:30  INFO 12544 --- [api-gateway] [main] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter bean initialized
2025-04-25T15:37:51.213+05:30  INFO 12544 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:37:51.395+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:37:51.496+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:37:51.497+05:30  INFO 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:37:52.794+05:30  INFO 12544 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:37:52.908+05:30  INFO 12544 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:37:53.919+05:30  INFO 12544 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:37:54.928+05:30  INFO 12544 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:37:54.947+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:37:54.973+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:37:54.973+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:37:54.974+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:37:54.974+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:37:54.975+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:37:54.975+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:37:54.976+05:30 DEBUG 12544 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:37:54.995+05:30  INFO 12544 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 11.269 seconds (process running for 11.803)
2025-04-25T15:38:40.603+05:30  INFO 12544 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:38:40.604+05:30 DEBUG 12544 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:38:40.625+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:38:40.628+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:38:40.629+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:38:40.634+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:38:40.635+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:38:40.635+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:38:40.635+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:38:40.635+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:38:40.636+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000143018de640@6aeb5d38
2025-04-25T15:38:40.637+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:38:40.637+05:30  INFO 12544 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:38:40.637+05:30 DEBUG 12544 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:38:40.750+05:30  INFO 12544 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Processing login for username: john
2025-04-25T15:38:40.945+05:30 DEBUG 12544 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:38:41.038+05:30 DEBUG 12544 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Generating token for username: john, authorities: [ROLE_ADMIN]
2025-04-25T15:38:41.395+05:30 DEBUG 12544 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Generated token for john: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzU3MjEsImV4cCI6MTc0NTU3OTMyMX0.ybphNhxULJLe6wumJI1gOvm3piHLHRZkxGLBdoQhzrI
2025-04-25T15:38:51.701+05:30  INFO 12544 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:38:51.702+05:30 DEBUG 12544 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzU3MjEsImV4cCI6MTc0NTU3OTMyMX0.ybphNhxULJLe6wumJI1gOvm3piHLHRZkxGLBdoQhzrI"
2025-04-25T15:38:51.702+05:30 DEBUG 12544 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:38:51.702+05:30 DEBUG 12544 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): sdfgh
2025-04-25T15:38:51.716+05:30 ERROR 12544 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Failed to parse JWT claims: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:38:51.716+05:30 ERROR 12544 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Error extracting username: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:38:51.716+05:30 ERROR 12544 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Token processing error for path /patients: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:41:36.649+05:30  INFO 12544 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:41:36.651+05:30  INFO 12544 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:41:36.659+05:30  INFO 12544 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:41:40.092+05:30  INFO 7988 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 7988 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:41:40.095+05:30 DEBUG 7988 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:41:40.097+05:30  INFO 7988 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:41:41.411+05:30  INFO 7988 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:41:41.730+05:30  INFO 7988 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 238 ms. Found 1 JPA repository interface.
2025-04-25T15:41:41.945+05:30  INFO 7988 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:41:42.458+05:30  INFO 7988 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:41:42.507+05:30  INFO 7988 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:41:42.532+05:30  INFO 7988 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:41:42.804+05:30  INFO 7988 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:41:42.839+05:30  INFO 7988 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:41:43.029+05:30  INFO 7988 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3193e21d
2025-04-25T15:41:43.031+05:30  INFO 7988 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:41:43.070+05:30  WARN 7988 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:41:43.098+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@37a3ec27) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@283baa39)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@416b1265) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2830315f)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@da22aa) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@75452aea)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@6c24f61d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@4537880f)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@14292d71) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@48e74764)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@338d47b) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7a3643e3)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2729bb71) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@55071497)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@10d98940) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@58b8f9e3)
2025-04-25T15:41:43.099+05:30 DEBUG 7988 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@32a033b6) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@5f6e2ad9)
2025-04-25T15:41:43.704+05:30  INFO 7988 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:41:43.738+05:30  INFO 7988 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:41:44.061+05:30  INFO 7988 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtUtil     : JwtUtil initialized with secret (first 5 chars): sdfgh
2025-04-25T15:41:44.061+05:30  INFO 7988 --- [api-gateway] [main] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter bean initialized
2025-04-25T15:41:45.378+05:30  INFO 7988 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:41:45.554+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:41:45.640+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:41:45.640+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:41:45.640+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:41:45.640+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:41:45.641+05:30  INFO 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:41:46.920+05:30  INFO 7988 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:41:47.040+05:30  INFO 7988 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:41:48.052+05:30  INFO 7988 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:41:49.064+05:30  INFO 7988 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:41:49.086+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:41:49.112+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:41:49.112+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:41:49.114+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:41:49.114+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:41:49.115+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:41:49.116+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:41:49.116+05:30 DEBUG 7988 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:41:49.132+05:30  INFO 7988 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 10.721 seconds (process running for 11.337)
2025-04-25T15:42:08.823+05:30  INFO 7988 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:42:08.823+05:30 DEBUG 7988 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:42:08.865+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:42:08.871+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:42:08.871+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:42:08.876+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:42:08.877+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:42:08.877+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:42:08.877+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:42:08.877+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:42:08.878+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x000001da438dcc28@413e011c
2025-04-25T15:42:08.878+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:42:08.879+05:30  INFO 7988 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:42:08.879+05:30 DEBUG 7988 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:42:09.050+05:30  INFO 7988 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Processing login for username: john
2025-04-25T15:42:09.230+05:30 DEBUG 7988 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:42:09.322+05:30 DEBUG 7988 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Generating token for username: john, authorities: [ROLE_ADMIN]
2025-04-25T15:42:09.695+05:30 DEBUG 7988 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Generated token for john: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzU5MjksImV4cCI6MTc0NTU3OTUyOX0.9iVoaHVmUk9dVzPY9upyfjtq0BEtQjcGo_ewTFN60-I
2025-04-25T15:42:18.303+05:30  INFO 7988 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:42:18.303+05:30 DEBUG 7988 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzU5MjksImV4cCI6MTc0NTU3OTUyOX0.9iVoaHVmUk9dVzPY9upyfjtq0BEtQjcGo_ewTFN60-I"
2025-04-25T15:42:18.303+05:30 DEBUG 7988 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:42:18.303+05:30 DEBUG 7988 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): sdfgh
2025-04-25T15:42:18.323+05:30 ERROR 7988 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Failed to parse JWT claims: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:42:18.324+05:30 ERROR 7988 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Error extracting username: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:42:18.324+05:30 ERROR 7988 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Token processing error for path /patients: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:43:36.484+05:30  INFO 7988 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:43:36.487+05:30  INFO 7988 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:43:36.493+05:30  INFO 7988 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:43:43.284+05:30  INFO 10868 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 10868 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:43:43.300+05:30 DEBUG 10868 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:43:43.300+05:30  INFO 10868 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:43:44.364+05:30  INFO 10868 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:43:44.520+05:30  INFO 10868 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 147 ms. Found 1 JPA repository interface.
2025-04-25T15:43:44.786+05:30  INFO 10868 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:43:45.366+05:30  INFO 10868 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:43:45.428+05:30  INFO 10868 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:43:45.444+05:30  INFO 10868 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:43:45.736+05:30  INFO 10868 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:43:45.759+05:30  INFO 10868 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:43:45.931+05:30  INFO 10868 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@53dba9cd
2025-04-25T15:43:45.931+05:30  INFO 10868 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:43:45.978+05:30  WARN 10868 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@42211e04) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6233c6c2)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@312a738d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7e50eeb9)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@34cb0e49) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@48b2dbc4)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2a667f44) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@53ba7997)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3f6f9cef) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@61dd1c3d)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7858d31d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@782e6b40)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@3b65084e) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@32d0d7eb)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@cae2a97) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7d12429)
2025-04-25T15:43:46.009+05:30 DEBUG 10868 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@14656be5) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@20be890d)
2025-04-25T15:43:46.636+05:30  INFO 10868 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:43:46.667+05:30  INFO 10868 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:43:47.027+05:30  INFO 10868 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtUtil     : JwtUtil initialized with secret (first 5 chars): sdfgh
2025-04-25T15:43:47.027+05:30 DEBUG 10868 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtUtil     : Signing key initialized for HS256
2025-04-25T15:43:47.027+05:30  INFO 10868 --- [api-gateway] [main] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter bean initialized
2025-04-25T15:43:48.345+05:30  INFO 10868 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:43:48.514+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:43:48.606+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:43:48.606+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:43:48.607+05:30  INFO 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:43:49.858+05:30  INFO 10868 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:43:49.978+05:30  INFO 10868 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:43:51.000+05:30  INFO 10868 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:43:52.011+05:30  INFO 10868 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:43:52.028+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:43:52.048+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:43:52.048+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:43:52.050+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:43:52.050+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:43:52.051+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:43:52.051+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:43:52.051+05:30 DEBUG 10868 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:43:52.065+05:30  INFO 10868 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 10.397 seconds (process running for 11.051)
2025-04-25T15:44:00.904+05:30  INFO 10868 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:44:00.904+05:30 DEBUG 10868 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:44:00.918+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:44:00.920+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:44:00.920+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:44:00.922+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:44:00.923+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:44:00.923+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:44:00.923+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:44:00.923+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:44:00.924+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x0000012a598e0d20@65f7ca81
2025-04-25T15:44:00.924+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:44:00.925+05:30  INFO 10868 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:44:00.925+05:30 DEBUG 10868 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:44:01.032+05:30  INFO 10868 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Processing login for username: john
2025-04-25T15:44:01.240+05:30 DEBUG 10868 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:44:01.323+05:30 DEBUG 10868 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Generating token for username: john, authorities: [ROLE_ADMIN]
2025-04-25T15:44:01.362+05:30 DEBUG 10868 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Generated token for john: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzYwNDEsImV4cCI6MTc0NTU3OTY0MX0.o0EHDC8GHMsbsMNVT4eCz_hGF0lnputk8p8qrZz-l3g
2025-04-25T15:44:11.772+05:30  INFO 10868 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:44:11.772+05:30 DEBUG 10868 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzYwNDEsImV4cCI6MTc0NTU3OTY0MX0.o0EHDC8GHMsbsMNVT4eCz_hGF0lnputk8p8qrZz-l3g"
2025-04-25T15:44:11.773+05:30 DEBUG 10868 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:44:11.773+05:30 DEBUG 10868 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): sdfgh
2025-04-25T15:44:11.790+05:30 ERROR 10868 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Failed to parse JWT claims: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:44:11.791+05:30 ERROR 10868 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Error extracting username: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:44:11.791+05:30 ERROR 10868 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Token processing error for path /patients: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-04-25T15:47:45.369+05:30  INFO 10868 --- [api-gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:47:45.376+05:30  INFO 10868 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:47:45.383+05:30  INFO 10868 --- [api-gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:47:50.350+05:30  INFO 14356 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 14356 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:47:50.352+05:30 DEBUG 14356 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:47:50.353+05:30  INFO 14356 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:47:51.239+05:30  INFO 14356 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:47:51.379+05:30  INFO 14356 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 128 ms. Found 1 JPA repository interface.
2025-04-25T15:47:51.594+05:30  INFO 14356 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:47:52.058+05:30  INFO 14356 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:47:52.122+05:30  INFO 14356 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:47:52.155+05:30  INFO 14356 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:47:52.432+05:30  INFO 14356 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:47:52.458+05:30  INFO 14356 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:47:52.625+05:30  INFO 14356 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@efe49ab
2025-04-25T15:47:52.627+05:30  INFO 14356 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:47:52.680+05:30  WARN 14356 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:47:52.712+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5a51336a) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@4d8056bf)
2025-04-25T15:47:52.713+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@42211e04) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6233c6c2)
2025-04-25T15:47:52.713+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@312a738d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7e50eeb9)
2025-04-25T15:47:52.713+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@34cb0e49) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@48b2dbc4)
2025-04-25T15:47:52.713+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2a667f44) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@53ba7997)
2025-04-25T15:47:52.713+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3f6f9cef) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@61dd1c3d)
2025-04-25T15:47:52.714+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@7858d31d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@782e6b40)
2025-04-25T15:47:52.714+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@3b65084e) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@32d0d7eb)
2025-04-25T15:47:52.714+05:30 DEBUG 14356 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@cae2a97) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7d12429)
2025-04-25T15:47:53.383+05:30  INFO 14356 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:47:53.418+05:30  INFO 14356 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:47:53.750+05:30  INFO 14356 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtUtil     : JwtUtil initialized with secret (first 5 chars): mysec
2025-04-25T15:47:53.753+05:30  WARN 14356 --- [api-gateway] [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig': Unsatisfied dependency expressed through field 'jwtAuthenticationFilter': Error creating bean with name 'jwtAuthenticationFilter': Unsatisfied dependency expressed through field 'jwtUtil': Error creating bean with name 'jwtUtil': Invocation of init method failed
2025-04-25T15:47:53.753+05:30  INFO 14356 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:47:53.755+05:30  INFO 14356 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-04-25T15:47:53.762+05:30  INFO 14356 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-04-25T15:47:53.781+05:30  INFO 14356 --- [api-gateway] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-25T15:47:53.806+05:30 ERROR 14356 --- [api-gateway] [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig': Unsatisfied dependency expressed through field 'jwtAuthenticationFilter': Error creating bean with name 'jwtAuthenticationFilter': Unsatisfied dependency expressed through field 'jwtUtil': Error creating bean with name 'jwtUtil': Invocation of init method failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962) ~[spring-context-6.1.6.jar:6.1.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.6.jar:6.1.6]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.2.5.jar:3.2.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.5.jar:3.2.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.5.jar:3.2.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.5.jar:3.2.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-3.2.5.jar:3.2.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-3.2.5.jar:3.2.5]
	at com.hospital.api_gateway.ApiGatewayApplication.main(ApiGatewayApplication.java:12) ~[classes/:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter': Unsatisfied dependency expressed through field 'jwtUtil': Error creating bean with name 'jwtUtil': Invocation of init method failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.6.jar:6.1.6]
	... 20 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jwtUtil': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:422) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.6.jar:6.1.6]
	... 34 common frames omitted
Caused by: io.jsonwebtoken.security.WeakKeyException: The specified key byte array is 112 bits which is not secure enough for any JWT HMAC-SHA algorithm.  The JWT JWA Specification (RFC 7518, Section 3.2) states that keys used with HMAC-SHA algorithms MUST have a size >= 256 bits (the key size must be greater than or equal to the hash output size).  Consider using the io.jsonwebtoken.security.Keys#secretKeyFor(SignatureAlgorithm) method to create a key guaranteed to be secure enough for your preferred HMAC-SHA algorithm.  See https://tools.ietf.org/html/rfc7518#section-3.2 for more information.
	at io.jsonwebtoken.security.Keys.hmacShaKeyFor(Keys.java:96) ~[jjwt-api-0.11.5.jar:0.11.5]
	at com.hospital.api_gateway.jwt.JwtUtil.init(JwtUtil.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219) ~[spring-beans-6.1.6.jar:6.1.6]
	... 46 common frames omitted

2025-04-25T15:49:42.981+05:30  INFO 13256 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Starting ApiGatewayApplication using Java 23.0.2 with PID 13256 (D:\Projects\microservices\api-gateway\target\classes started by nagaa in D:\Posts\appointment-service)
2025-04-25T15:49:42.983+05:30 DEBUG 13256 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Running with Spring Boot v3.2.5, Spring v6.1.6
2025-04-25T15:49:42.984+05:30  INFO 13256 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : No active profile set, falling back to 1 default profile: "default"
2025-04-25T15:49:43.923+05:30  INFO 13256 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-25T15:49:44.055+05:30  INFO 13256 --- [api-gateway] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 117 ms. Found 1 JPA repository interface.
2025-04-25T15:49:44.267+05:30  INFO 13256 --- [api-gateway] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ae4b087d-c3e6-36ad-879e-075e33898882
2025-04-25T15:49:44.735+05:30  INFO 13256 --- [api-gateway] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-25T15:49:44.799+05:30  INFO 13256 --- [api-gateway] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-04-25T15:49:44.839+05:30  INFO 13256 --- [api-gateway] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-04-25T15:49:45.124+05:30  INFO 13256 --- [api-gateway] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-25T15:49:45.154+05:30  INFO 13256 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-04-25T15:49:45.319+05:30  INFO 13256 --- [api-gateway] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@402d6012
2025-04-25T15:49:45.321+05:30  INFO 13256 --- [api-gateway] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-04-25T15:49:45.368+05:30  WARN 13256 --- [api-gateway] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-04-25T15:49:45.399+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(12, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@34cb0e49) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@48b2dbc4)
2025-04-25T15:49:45.400+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-9, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@2a667f44) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@53ba7997)
2025-04-25T15:49:45.400+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(-3, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@3f6f9cef) replaced previous registration(org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@61dd1c3d)
2025-04-25T15:49:45.400+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4003, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7858d31d) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@782e6b40)
2025-04-25T15:49:45.400+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4001, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@3b65084e) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@32d0d7eb)
2025-04-25T15:49:45.400+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(4002, org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@cae2a97) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@7d12429)
2025-04-25T15:49:45.400+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2004, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@14656be5) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@20be890d)
2025-04-25T15:49:45.401+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2005, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@5db9f51f) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@534762ed)
2025-04-25T15:49:45.401+05:30 DEBUG 13256 --- [api-gateway] [main] o.h.t.d.sql.spi.DdlTypeRegistry          : addDescriptor(2011, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@6c421123) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@38e00b47)
2025-04-25T15:49:46.136+05:30  INFO 13256 --- [api-gateway] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-25T15:49:46.177+05:30  INFO 13256 --- [api-gateway] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-25T15:49:46.563+05:30  INFO 13256 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtUtil     : JwtUtil initialized with secret (first 5 chars): thisi
2025-04-25T15:49:46.567+05:30 DEBUG 13256 --- [api-gateway] [main] com.hospital.api_gateway.jwt.JwtUtil     : Signing key initialized for HS256, hash: -1000270658
2025-04-25T15:49:46.567+05:30  INFO 13256 --- [api-gateway] [main] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter bean initialized
2025-04-25T15:49:47.907+05:30  INFO 13256 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:49:48.051+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.gateway.config.GatewayProperties   : Routes supplied from Gateway Properties: [RouteDefinition{id='auth-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/auth/**}}], filters=[], uri=http://localhost:8080, order=0, metadata={}}, RouteDefinition{id='patient-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/patients/**}}], filters=[], uri=http://localhost:8081, order=0, metadata={}}, RouteDefinition{id='appointment-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/appointments/**}}], filters=[], uri=http://localhost:8082, order=0, metadata={}}, RouteDefinition{id='notification-service', predicates=[PredicateDefinition{name='Path', args={_genkey_0=/notifications/**}}], filters=[], uri=http://localhost:8083, order=0, metadata={}}]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2025-04-25T15:49:48.138+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2025-04-25T15:49:48.139+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2025-04-25T15:49:48.139+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-25T15:49:48.139+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2025-04-25T15:49:48.139+05:30  INFO 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-25T15:49:49.406+05:30  INFO 13256 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:49:49.518+05:30  INFO 13256 --- [api-gateway] [main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2025-04-25T15:49:50.540+05:30  INFO 13256 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:49:51.550+05:30  INFO 13256 --- [api-gateway] [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
2025-04-25T15:49:51.567+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition auth-service applying {_genkey_0=/auth/**} to Path
2025-04-25T15:49:51.584+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: auth-service
2025-04-25T15:49:51.585+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition patient-service applying {_genkey_0=/patients/**} to Path
2025-04-25T15:49:51.585+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: patient-service
2025-04-25T15:49:51.585+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition appointment-service applying {_genkey_0=/appointments/**} to Path
2025-04-25T15:49:51.586+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: appointment-service
2025-04-25T15:49:51.586+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition notification-service applying {_genkey_0=/notifications/**} to Path
2025-04-25T15:49:51.587+05:30 DEBUG 13256 --- [api-gateway] [main] o.s.c.g.r.RouteDefinitionRouteLocator    : RouteDefinition matched: notification-service
2025-04-25T15:49:51.599+05:30  INFO 13256 --- [api-gateway] [main] c.h.api_gateway.ApiGatewayApplication    : Started ApiGatewayApplication in 10.365 seconds (process running for 10.99)
2025-04-25T15:50:03.723+05:30  INFO 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:50:03.723+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:50:03.739+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:50:03.741+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:50:03.742+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:50:03.745+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:50:03.745+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:50:03.746+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:50:03.746+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:50:03.746+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:50:03.747+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x0000018ab98e0220@25e3aa70
2025-04-25T15:50:03.747+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:50:03.747+05:30  INFO 13256 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:50:03.747+05:30 DEBUG 13256 --- [api-gateway] [parallel-1] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:50:03.840+05:30  INFO 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Processing login for username: john
2025-04-25T15:50:03.972+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:50:04.050+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Generating token for username: john, authorities: [ROLE_ADMIN]
2025-04-25T15:50:04.079+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.controller.AuthController          : Generated token for john: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A
2025-04-25T15:50:12.702+05:30  INFO 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:50:12.703+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A"
2025-04-25T15:50:12.703+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Parsed token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A
2025-04-25T15:50:12.703+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:50:12.703+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:50:12.721+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Extracting roles from token
2025-04-25T15:50:12.721+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:50:12.723+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : Token username: john, roles: [ROLE_ADMIN]
2025-04-25T15:50:12.723+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Validating token for username: john
2025-04-25T15:50:12.723+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:50:12.724+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] com.hospital.api_gateway.jwt.JwtUtil     : Token validation: usernameMatch=true, notExpired=true, isValid=true
2025-04-25T15:50:12.724+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-3] c.h.a.jwt.JwtAuthenticationFilter        : SecurityContext set for user: john
2025-04-25T15:50:12.728+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:50:12.728+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:50:12.729+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:50:12.729+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:50:12.729+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:50:12.729+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:50:12.729+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:50:12.729+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:50:12.729+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:50:12.730+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:50:12.730+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:50:12.730+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthenticatedReactiveAuthorizationManager@4a581523
2025-04-25T15:50:12.731+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:50:12.731+05:30  INFO 13256 --- [api-gateway] [parallel-2] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:50:12.731+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A"
2025-04-25T15:50:12.731+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] c.h.a.jwt.JwtAuthenticationFilter        : Parsed token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A
2025-04-25T15:50:12.731+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:50:12.731+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:50:12.732+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] com.hospital.api_gateway.jwt.JwtUtil     : Extracting roles from token
2025-04-25T15:50:12.732+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:50:12.734+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] c.h.a.jwt.JwtAuthenticationFilter        : Token username: john, roles: [ROLE_ADMIN]
2025-04-25T15:50:12.734+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] com.hospital.api_gateway.jwt.JwtUtil     : Validating token for username: john
2025-04-25T15:50:12.734+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:50:12.735+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] com.hospital.api_gateway.jwt.JwtUtil     : Token validation: usernameMatch=true, notExpired=true, isValid=true
2025-04-25T15:50:12.736+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] c.h.a.jwt.JwtAuthenticationFilter        : SecurityContext set for user: john
2025-04-25T15:50:12.739+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: patient-service
2025-04-25T15:50:12.740+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8080/patients] to Route{id='patient-service', uri=http://localhost:8081, order=0, predicate=Paths: [/patients/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-25T15:50:12.740+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [c7404f22-2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@258291de
2025-04-25T15:50:12.740+05:30 DEBUG 13256 --- [api-gateway] [parallel-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2eb0932c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@189f3ccd}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@47d0195b}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@d8a2b1b}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@82382d1}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46f041cb}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6e5df971}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@4125bc3c}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@6c120b00}, order = 2147483647]]
2025-04-25T15:50:12.927+05:30 ERROR 13256 --- [api-gateway] [reactor-http-nio-5] a.w.r.e.AbstractErrorWebExceptionHandler : [c7404f22-2]  500 Server Error for HTTP GET "/patients"

io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: getsockopt: localhost/127.0.0.1:8081
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint  com.hospital.api_gateway.jwt.JwtAuthenticationFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]
	*__checkpoint  com.hospital.api_gateway.jwt.JwtAuthenticationFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]
	*__checkpoint  HTTP GET "/patients" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:1062) ~[na:na]
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.109.Final.jar:4.1.109.Final]
	at java.base/java.lang.Thread.run(Thread.java:1575) ~[na:na]

2025-04-25T15:51:40.330+05:30  INFO 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:51:40.330+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A
2025-04-25T15:51:40.330+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : Parsed token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A
2025-04-25T15:51:40.330+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:51:40.330+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:51:40.332+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Extracting roles from token
2025-04-25T15:51:40.333+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:51:40.334+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : Token username: john, roles: [ROLE_ADMIN]
2025-04-25T15:51:40.334+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Validating token for username: john
2025-04-25T15:51:40.334+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:51:40.335+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Token validation: usernameMatch=true, notExpired=true, isValid=true
2025-04-25T15:51:40.335+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : SecurityContext set for user: john
2025-04-25T15:51:40.338+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:51:40.338+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:51:40.338+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:51:40.338+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:51:40.338+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:51:40.338+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:51:40.338+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthenticatedReactiveAuthorizationManager@4a581523
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:51:40.339+05:30  INFO 13256 --- [api-gateway] [parallel-3] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] c.h.a.jwt.JwtAuthenticationFilter        : Parsed token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY0MDQsImV4cCI6MTc0NTU4MDAwNH0.MmBsI6txoztshAgHoZxJUnkHl31AQiGoxPBTMM8pi_A
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:51:40.339+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:51:40.340+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] com.hospital.api_gateway.jwt.JwtUtil     : Extracting roles from token
2025-04-25T15:51:40.340+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:51:40.342+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] c.h.a.jwt.JwtAuthenticationFilter        : Token username: john, roles: [ROLE_ADMIN]
2025-04-25T15:51:40.342+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] com.hospital.api_gateway.jwt.JwtUtil     : Validating token for username: john
2025-04-25T15:51:40.342+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:51:40.344+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] com.hospital.api_gateway.jwt.JwtUtil     : Token validation: usernameMatch=true, notExpired=true, isValid=true
2025-04-25T15:51:40.344+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] c.h.a.jwt.JwtAuthenticationFilter        : SecurityContext set for user: john
2025-04-25T15:51:40.344+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: patient-service
2025-04-25T15:51:40.344+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8080/patients] to Route{id='patient-service', uri=http://localhost:8081, order=0, predicate=Paths: [/patients/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-25T15:51:40.344+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [edc937d7-3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@258291de
2025-04-25T15:51:40.344+05:30 DEBUG 13256 --- [api-gateway] [parallel-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2eb0932c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@189f3ccd}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@47d0195b}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@d8a2b1b}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@82382d1}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46f041cb}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6e5df971}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@4125bc3c}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@6c120b00}, order = 2147483647]]
2025-04-25T15:51:40.348+05:30 ERROR 13256 --- [api-gateway] [reactor-http-nio-8] a.w.r.e.AbstractErrorWebExceptionHandler : [edc937d7-3]  500 Server Error for HTTP GET "/patients"

io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: getsockopt: localhost/127.0.0.1:8081
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint  com.hospital.api_gateway.jwt.JwtAuthenticationFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]
	*__checkpoint  com.hospital.api_gateway.jwt.JwtAuthenticationFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]
	*__checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]
	*__checkpoint  HTTP GET "/patients" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:1062) ~[na:na]
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.109.Final.jar:4.1.109.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.109.Final.jar:4.1.109.Final]
	at java.base/java.lang.Thread.run(Thread.java:1575) ~[na:na]

2025-04-25T15:52:37.319+05:30  INFO 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:52:37.319+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'POST /logout'
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] athPatternParserServerWebExchangeMatcher : Checking match of request : '/auth/login'; against '/auth/login'
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] athPatternParserServerWebExchangeMatcher : Request 'POST /auth/login' doesn't match 'null /auth/signup'
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x0000018ab98e0220@25e3aa70
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:52:37.320+05:30  INFO 13256 --- [api-gateway] [parallel-4] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for POST /auth/login
2025-04-25T15:52:37.320+05:30 DEBUG 13256 --- [api-gateway] [parallel-4] c.h.a.jwt.JwtAuthenticationFilter        : Skipping authentication for public path: /auth/login
2025-04-25T15:52:37.322+05:30  INFO 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.controller.AuthController          : Processing login for username: john
2025-04-25T15:52:37.323+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] org.hibernate.SQL                        : select u1_0.id,u1_0.password,u1_0.roles,u1_0.username from users u1_0 where u1_0.username=?
2025-04-25T15:52:37.383+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Generating token for username: john, authorities: [ROLE_ADMIN]
2025-04-25T15:52:37.384+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.controller.AuthController          : Generated token for john: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY1NTcsImV4cCI6MTc0NTU4MDE1N30.AfMzYDBTBL8mmRDpuJAAyv8dHB569g6E0qAkRrII3Ho
2025-04-25T15:52:56.200+05:30  INFO 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:52:56.200+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY1NTcsImV4cCI6MTc0NTU4MDE1N30.AfMzYDBTBL8mmRDpuJAAyv8dHB569g6E0qAkRrII3Ho"
2025-04-25T15:52:56.201+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : Parsed token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY1NTcsImV4cCI6MTc0NTU4MDE1N30.AfMzYDBTBL8mmRDpuJAAyv8dHB569g6E0qAkRrII3Ho
2025-04-25T15:52:56.201+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:52:56.201+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:52:56.202+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Extracting roles from token
2025-04-25T15:52:56.202+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:52:56.204+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : Token username: john, roles: [ROLE_ADMIN]
2025-04-25T15:52:56.204+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Validating token for username: john
2025-04-25T15:52:56.204+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:52:56.205+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] com.hospital.api_gateway.jwt.JwtUtil     : Token validation: usernameMatch=true, notExpired=true, isValid=true
2025-04-25T15:52:56.205+05:30 DEBUG 13256 --- [api-gateway] [reactor-http-nio-7] c.h.a.jwt.JwtAuthenticationFilter        : SecurityContext set for user: john
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'POST /logout'
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/login', method=null}
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/login'
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/auth/signup', method=null}
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] athPatternParserServerWebExchangeMatcher : Request 'GET /patients' doesn't match 'null /auth/signup'
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/patients/**', method=null}
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] athPatternParserServerWebExchangeMatcher : Checking match of request : '/patients'; against '/patients/**'
2025-04-25T15:52:56.206+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : matched
2025-04-25T15:52:56.207+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] a.DelegatingReactiveAuthorizationManager : Checking authorization on '/patients' using org.springframework.security.authorization.AuthenticatedReactiveAuthorizationManager@4a581523
2025-04-25T15:52:56.207+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.s.w.s.a.AuthorizationWebFilter       : Authorization successful
2025-04-25T15:52:56.207+05:30  INFO 13256 --- [api-gateway] [parallel-5] c.h.a.jwt.JwtAuthenticationFilter        : JwtAuthenticationFilter invoked for GET /patients
2025-04-25T15:52:56.207+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] c.h.a.jwt.JwtAuthenticationFilter        : Authorization header: Bearer "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY1NTcsImV4cCI6MTc0NTU4MDE1N30.AfMzYDBTBL8mmRDpuJAAyv8dHB569g6E0qAkRrII3Ho"
2025-04-25T15:52:56.207+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] c.h.a.jwt.JwtAuthenticationFilter        : Parsed token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huIiwicm9sZXMiOlsiUk9MRV9BRE1JTiJdLCJpYXQiOjE3NDU1NzY1NTcsImV4cCI6MTc0NTU4MDE1N30.AfMzYDBTBL8mmRDpuJAAyv8dHB569g6E0qAkRrII3Ho
2025-04-25T15:52:56.207+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] com.hospital.api_gateway.jwt.JwtUtil     : Extracting username from token
2025-04-25T15:52:56.207+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:52:56.209+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] com.hospital.api_gateway.jwt.JwtUtil     : Extracting roles from token
2025-04-25T15:52:56.209+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:52:56.210+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] c.h.a.jwt.JwtAuthenticationFilter        : Token username: john, roles: [ROLE_ADMIN]
2025-04-25T15:52:56.210+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] com.hospital.api_gateway.jwt.JwtUtil     : Validating token for username: john
2025-04-25T15:52:56.210+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] com.hospital.api_gateway.jwt.JwtUtil     : Parsing token claims with secret (first 5 chars): thisi, key hash: -1000270658
2025-04-25T15:52:56.211+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] com.hospital.api_gateway.jwt.JwtUtil     : Token validation: usernameMatch=true, notExpired=true, isValid=true
2025-04-25T15:52:56.211+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] c.h.a.jwt.JwtAuthenticationFilter        : SecurityContext set for user: john
2025-04-25T15:52:56.212+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: patient-service
2025-04-25T15:52:56.212+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8080/patients] to Route{id='patient-service', uri=http://localhost:8081, order=0, predicate=Paths: [/patients/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-25T15:52:56.212+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [edc937d7-5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@258291de
2025-04-25T15:52:56.212+05:30 DEBUG 13256 --- [api-gateway] [parallel-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2eb0932c}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@189f3ccd}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@47d0195b}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@d8a2b1b}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@82382d1}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@46f041cb}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@6e5df971}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@4125bc3c}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@6c120b00}, order = 2147483647]]
